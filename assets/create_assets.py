from PIL import Image


PALETTE = {
    0: (0, 0, 0, 0),  # Прозрачный

    # "Тёплые" оттенки (изначально задумывались под "кожу",
    #   но используем и для костей)
    1: (90, 70, 50, 255),  # Тёмный оттенок (кость/тень)
    2: (140, 120, 90, 255),  # Средний оттенок кости
    3: (190, 170, 130, 255),  # Светлый
    4: (235, 215, 175, 255),  # Очень светлый (блик)

    # Серые/металлик (используем для плаща/доспехов)
    10: (50, 50, 50, 255),  # Очень тёмный
    11: (90, 90, 90, 255),  # Тёмный
    12: (150, 150, 150, 255),  # Средний
    13: (220, 220, 220, 255),  # Почти белый (блик на металле)

    # Золото/жёлтый
    20: (120, 100, 20, 255),
    21: (200, 170, 50, 255),
    22: (255, 230, 80, 255),
    23: (255, 255, 160, 255),

    # Красные/оранжевые
    30: (140, 50, 0, 255),  # Тёмно-оранжевый
    31: (230, 100, 20, 255),  # Оранжевый
    32: (255, 220, 50, 255),  # Ярко-жёлтый
    33: (255, 0, 0, 255),  # Красный (глаза, эффекты)

    # Зелёные (трава/листья)
    40: (20, 70, 20, 255),
    41: (30, 100, 30, 255),
    42: (50, 130, 50, 255),

    # Прочие (фиолет, розовый, жёлтый, белый) – для цветков, кристаллов
    50: (160, 0, 160, 255),  # Фиолетовый
    51: (255, 100, 100, 255),  # Розово-красный
    52: (255, 225, 50, 255),  # Жёлтый
    53: (255, 255, 255, 255),  # Белый
}


def create_sprite(pixel_matrix, scale, filename):
    """    Универсальная функция генерации пиксельного спрайта по матрице."""
    height = len(pixel_matrix)
    width = len(pixel_matrix[0]) if height > 0 else 0

    img = Image.new("RGBA", (width, height), (0, 0, 0, 0))
    pixels = img.load()

    for y in range(height):
        for x in range(width):
            idx = pixel_matrix[y][x]
            rgba = PALETTE.get(idx, (255, 0, 255, 255))  # fallback - ярко-розовый
            pixels[x, y] = rgba

    if scale > 1:
        img = img.resize((width * scale, height * scale), resample=Image.NEAREST)

    img.save(filename)
    print(f"Сгенерировано: {filename}")
    return img


# 1) Герой (16x16)
hero_pixel_data = [
    [0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 2, 3, 4, 4, 4, 4, 3, 2, 0, 0, 0, 0],
    [0, 0, 0, 0, 2, 4, 1, 1, 1, 1, 4, 2, 0, 0, 0, 0],
    [0, 0, 0, 2, 3, 4, 1, 1, 1, 1, 4, 3, 2, 0, 0, 0],
    [0, 0, 0, 2, 4, 4, 1, 33, 33, 1, 4, 4, 2, 0, 0, 0],  # красные глаза (33)
    [0, 0, 0, 2, 4, 4, 1, 1, 1, 1, 4, 4, 2, 0, 0, 0],
    [0, 0, 0, 2, 3, 4, 4, 4, 4, 4, 4, 3, 2, 0, 0, 0],
    [0, 0, 0, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 0, 0, 0],
    [0, 0, 0, 10, 11, 20, 20, 20, 20, 20, 20, 11, 11, 0, 0, 0],  # золото (20..23)
    [0, 0, 0, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 0, 0, 0],
    [0, 0, 0, 10, 11, 11, 11, 12, 12, 11, 11, 11, 11, 0, 0, 0],
    [0, 0, 0, 10, 11, 11, 11, 12, 12, 11, 11, 11, 11, 0, 0, 0],
    [0, 0, 0, 0, 10, 11, 11, 0, 0, 11, 11, 11, 10, 0, 0, 0],
    [0, 0, 0, 0, 0, 10, 11, 11, 11, 11, 11, 10, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
]

# 2) Обычный скелет (8x8)
skeleton_pixel_data = [
    [0, 0, 2, 3, 3, 2, 0, 0],
    [0, 2, 3, 4, 4, 3, 2, 0],
    [2, 3, 4, 33, 33, 4, 3, 2],  # красные глаза
    [2, 3, 4, 4, 4, 4, 3, 2],
    [2, 3, 4, 4, 4, 4, 3, 2],
    [0, 2, 3, 4, 4, 3, 2, 0],
    [0, 0, 2, 3, 3, 2, 0, 0],
    [0, 0, 0, 2, 2, 0, 0, 0],
]

# 3) Снаряд (огненный шар) 8×8
projectile_pixel_data = [
    [0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 30, 30, 0, 0, 0],
    [0, 0, 30, 31, 31, 30, 0, 0],
    [0, 30, 31, 32, 32, 31, 30, 0],
    [0, 30, 31, 32, 32, 31, 30, 0],
    [0, 0, 30, 31, 31, 30, 0, 0],
    [0, 0, 0, 30, 30, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0],
]

# 4) Монетка (8×8)
coin_pixel_data = [
    [0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 20, 20, 0, 0, 0],
    [0, 0, 20, 21, 21, 20, 0, 0],
    [0, 20, 21, 22, 22, 21, 20, 0],
    [0, 20, 21, 22, 23, 21, 20, 0],  # блик (23)
    [0, 0, 20, 21, 21, 20, 0, 0],
    [0, 0, 0, 20, 20, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0],
]

# 5) Трава (16×16)
grass_tile = [
    [41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41],
    [41, 40, 41, 41, 42, 41, 41, 41, 41, 41, 41, 42, 41, 41, 40, 41],
    [41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41],
    [41, 41, 42, 41, 41, 41, 41, 41, 42, 41, 41, 41, 41, 41, 41, 41],
    [41, 41, 50, 41, 41, 41, 40, 41, 41, 41, 41, 41, 41, 51, 41, 41],
    [41, 41, 41, 41, 41, 42, 41, 41, 41, 41, 41, 41, 42, 41, 41, 41],
    [41, 41, 41, 41, 40, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41],
    [41, 42, 41, 41, 41, 52, 53, 41, 41, 41, 41, 41, 41, 41, 42, 41],
    [41, 41, 41, 42, 41, 41, 41, 41, 41, 41, 40, 41, 41, 41, 41, 41],
    [41, 41, 41, 41, 41, 41, 41, 41, 42, 41, 41, 41, 41, 41, 41, 41],
    [41, 40, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 40, 41, 41],
    [41, 41, 41, 41, 41, 42, 41, 41, 41, 41, 41, 41, 42, 41, 41, 41],
    [41, 41, 42, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41],
    [41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41],
    [41, 41, 41, 40, 41, 41, 41, 41, 41, 41, 41, 42, 41, 41, 41, 41],
    [41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41, 41],
]

# 6) Кристалл (8×8)
crystal_pixel_data = [
    [0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 50, 50, 0, 0, 0],
    [0, 0, 50, 50, 50, 50, 0, 0],
    [0, 50, 50, 53, 53, 50, 50, 0],  # 53 — белый блик
    [0, 50, 53, 50, 50, 53, 50, 0],
    [0, 0, 50, 50, 50, 50, 0, 0],
    [0, 0, 0, 50, 50, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 0, 0],
]

# 7) Скелет-босс (24×24)
boss_skeleton_pixel_data = [
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 1, 1, 2, 2, 1, 1, 0, 0, 0, 1, 1, 2, 2, 1, 1, 0, 0, 0, 0],
    [0, 0, 0, 0, 1, 2, 3, 3, 3, 3, 2, 1, 1, 2, 3, 3, 3, 3, 2, 1, 0, 0, 0, 0],
    [0, 0, 0, 1, 2, 3, 4, 4, 4, 4, 3, 2, 2, 3, 4, 4, 4, 4, 3, 2, 1, 0, 0, 0],
    [0, 0, 1, 2, 3, 4, 4, 33, 33, 4, 4, 3, 3, 4, 4, 33, 33, 4, 4, 3, 2, 1, 0, 0],
    [0, 0, 1, 2, 3, 4, 4, 4, 4, 4, 4, 3, 3, 4, 4, 4, 4, 4, 4, 3, 2, 1, 0, 0],
    [0, 0, 1, 2, 2, 3, 3, 4, 4, 3, 3, 2, 2, 3, 3, 4, 4, 3, 3, 2, 2, 1, 0, 0],
    [0, 0, 0, 1, 2, 3, 10, 10, 10, 10, 3, 2, 2, 3, 10, 10, 10, 10, 3, 2, 1, 0, 0, 0],
    [0, 0, 0, 1, 3, 10, 11, 11, 10, 10, 11, 10, 10, 11, 10, 10, 11, 11, 10, 3, 1, 0, 0, 0],
    [0, 0, 1, 3, 10, 11, 2, 0, 0, 0, 2, 11, 10, 2, 0, 0, 0, 2, 11, 10, 3, 1, 0, 0],
    [0, 0, 1, 10, 11, 2, 2, 0, 0, 0, 0, 2, 2, 0, 0, 0, 0, 2, 2, 11, 10, 1, 0, 0],
    [0, 0, 1, 10, 2, 2, 4, 4, 0, 0, 4, 4, 4, 4, 0, 0, 4, 4, 2, 2, 10, 1, 0, 0],
    [0, 0, 1, 10, 2, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 2, 10, 1, 0, 0],
    [0, 0, 1, 10, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 3, 10, 1, 0, 0],
    [0, 0, 0, 1, 3, 4, 4, 0, 0, 0, 0, 4, 4, 0, 0, 0, 0, 4, 4, 3, 1, 0, 0, 0],
    [0, 0, 0, 1, 2, 4, 0, 0, 0, 0, 0, 4, 4, 0, 0, 0, 0, 4, 0, 4, 2, 1, 0, 0],
    [0, 0, 0, 1, 10, 11, 10, 10, 10, 10, 10, 11, 11, 10, 10, 10, 10, 10, 11, 10, 1, 0, 0, 0],
    [0, 0, 0, 1, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 10, 1, 0, 0, 0],
    [0, 0, 0, 1, 11, 11, 12, 12, 11, 11, 11, 10, 10, 11, 11, 11, 11, 11, 11, 11, 1, 0, 0, 0],
    [0, 0, 0, 1, 11, 12, 12, 13, 13, 12, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 1, 0, 0, 0],
    [0, 0, 0, 1, 10, 11, 12, 13, 13, 12, 11, 11, 11, 11, 11, 11, 11, 11, 11, 10, 1, 0, 0, 0],
    [0, 0, 0, 1, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 10, 1, 0, 0, 0],
    [0, 0, 0, 0, 1, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 10, 1, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 1, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 10, 1, 0, 0, 0, 0, 0],
]

if __name__ == "__main__":
    create_sprite(hero_pixel_data, scale=8, filename="player.png")
    create_sprite(skeleton_pixel_data, scale=8, filename="enemy.png")
    create_sprite(projectile_pixel_data, scale=8, filename="bullet.png")
    create_sprite(coin_pixel_data, scale=8, filename="coin.png")
    create_sprite(grass_tile, scale=4, filename="grass_tile.png")
    create_sprite(crystal_pixel_data, scale=8, filename="bosscoin.png")
    create_sprite(boss_skeleton_pixel_data, scale=8, filename="boss.png")

    print("Все спрайты сгенерированы успешно!")
